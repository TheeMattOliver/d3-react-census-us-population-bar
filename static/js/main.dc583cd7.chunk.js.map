{"version":3,"sources":["lib/utils.js","components/ChartTitle.js","hooks/useResizeObserver.js","components/PopulationBarChart.js","App.js","index.js"],"names":["states","Map","map","v","getByValue","searchValue","entries","key","ageVariables","B01001_003E","B01001_004E","B01001_005E","B01001_006E","B01001_007E","B01001_008E","B01001_009E","B01001_010E","B01001_011E","B01001_012E","B01001_013E","B01001_014E","B01001_015E","B01001_016E","B01001_017E","B01001_018E","B01001_019E","B01001_020E","B01001_021E","B01001_022E","B01001_023E","B01001_024E","B01001_025E","B01001_027E","B01001_028E","B01001_029E","B01001_030E","B01001_031E","B01001_032E","B01001_033E","B01001_034E","B01001_035E","B01001_036E","B01001_037E","B01001_038E","B01001_039E","B01001_040E","B01001_041E","B01001_042E","B01001_043E","B01001_044E","B01001_045E","B01001_046E","B01001_047E","B01001_048E","B01001_049E","ChartTitle","props","index","data","d","i","Array","from","V","sum","get","className","useResizeObserver","ref","useState","dimensions","setDimensions","useEffect","observeTarget","current","resizeObserver","ResizeObserver","forEach","entry","contentRect","observe","unobserve","PopulationBarChart","property","svgRef","useRef","wrapperRef","console","log","svg","d3","getBoundingClientRect","width","height","margin","innerWidth","innerHeight","yScale","domain","name","range","padding","xScale","value","append","attr","select","call","g","transition","ticks","remove","tickSizeOuter","selectAll","enter","style","bandwidth","delay","text","toLocaleString","marginBottom","App","selectedState","setSelectedState","censusData","setCensusData","geography","setGeography","join","then","code","rollup","values","slice","statesArr","onChange","event","target","mapValue","option","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dc583cd7.chunk.js","sourcesContent":["\nconst variables = new Map([[\"<10\", [\"003\", \"004\", \"027\", \"028\"]], [\"10-19\", [\"005\",\n\"006\", \"007\", \"029\", \"030\", \"031\"]], [\"20-29\", [\"008\", \"009\", \"010\", \"011\",\n\"032\", \"033\", \"034\", \"035\"]], [\"30-39\", [\"012\", \"013\", \"036\", \"037\"]],\n[\"40-49\", [\"014\", \"015\", \"038\", \"039\"]], [\"50-59\", [\"016\", \"017\", \"040\",\n\"041\"]], [\"60-69\", [\"018\", \"019\", \"020\", \"021\", \"042\", \"043\", \"044\", \"045\"]],\n[\"70-79\", [\"022\", \"023\", \"046\", \"047\"]], [\"≥80\", [\"024\", \"025\", \"048\",\n\"049\"]]].map(([key, V]) => [key, V.map(v => `B01001_${v}E`)]))\n\nconst states = new Map([[\"*\", \"All states\"], [\"01\", \"AL\"], [\"02\", \"AK\"], [\"04\", \"AZ\"], [\"05\",\n\"AR\"], [\"06\", \"CA\"], [\"08\", \"CO\"], [\"09\", \"CT\"], [\"10\", \"DE\"], [\"11\", \"DC\"],\n[\"12\", \"FL\"], [\"13\", \"GA\"], [\"15\", \"HI\"], [\"16\", \"ID\"], [\"17\", \"IL\"], [\"18\",\n\"IN\"], [\"19\", \"IA\"], [\"20\", \"KS\"], [\"21\", \"KY\"], [\"22\", \"LA\"], [\"23\", \"ME\"],\n[\"24\", \"MD\"], [\"25\", \"MA\"], [\"26\", \"MI\"], [\"27\", \"MN\"], [\"28\", \"MS\"], [\"29\",\n\"MO\"], [\"30\", \"MT\"], [\"31\", \"NE\"], [\"32\", \"NV\"], [\"33\", \"NH\"], [\"34\", \"NJ\"],\n[\"35\", \"NM\"], [\"36\", \"NY\"], [\"37\", \"NC\"], [\"38\", \"ND\"], [\"39\", \"OH\"], [\"40\",\n\"OK\"], [\"41\", \"OR\"], [\"42\", \"PA\"], [\"44\", \"RI\"], [\"45\", \"SC\"], [\"46\", \"SD\"],\n[\"47\", \"TN\"], [\"48\", \"TX\"], [\"49\", \"UT\"], [\"50\", \"VT\"], [\"51\", \"VA\"], [\"53\",\n\"WA\"], [\"54\", \"WV\"], [\"55\", \"WI\"], [\"56\", \"WY\"], [\"72\", \"PR\"]])\n\nconst getByValue = (map, searchValue) => {\n  for (let [key, value] of map.entries()) {\n    if (value === searchValue)\n      return key;\n  }\n}\n\nconst ageBands = [\"<10\",\"10-19\",\"20-29\",\"30-39\",\"40-49\",\"50-59\",\"60-69\",\"70-79\",\"≥80\"]\n\nconst sumArray = (array) => {\n  const newArray = [];\n  array.forEach(sub => {\n    sub.forEach((num, index) => {\n       if(newArray[index]){\n          newArray[index] += num;\n       }else{\n          newArray[index] = num;\n       }\n    });\n });\n return newArray;\n}\n\nconst ageVariables = ({\n  B01001_003E: \"<5\", // Male\n  B01001_004E: \"5-9\",\n  B01001_005E: \"10-14\",\n  B01001_006E: \"15-19\", // 15-17,\n  B01001_007E: \"15-19\", // 18-19,\n  B01001_008E: \"20-24\", // 20\n  B01001_009E: \"20-24\", // 21\n  B01001_010E: \"20-24\", // 22-24\n  B01001_011E: \"25-29\",\n  B01001_012E: \"30-34\",\n  B01001_013E: \"35-39\",\n  B01001_014E: \"40-44\",\n  B01001_015E: \"45-49\",\n  B01001_016E: \"50-54\",\n  B01001_017E: \"55-59\",\n  B01001_018E: \"60-64\", // 60-61\n  B01001_019E: \"60-64\", // 62-64\n  B01001_020E: \"65-69\", // 65-66\n  B01001_021E: \"65-69\", // 67-69\n  B01001_022E: \"70-74\",\n  B01001_023E: \"75-79\",\n  B01001_024E: \"80-84\",\n  B01001_025E: \"≥85\",\n  B01001_027E: \"<5\", // Female\n  B01001_028E: \"5-9\",\n  B01001_029E: \"10-14\",\n  B01001_030E: \"15-19\", // 15-17\n  B01001_031E: \"15-19\", // 18-19\n  B01001_032E: \"20-24\", // 20\n  B01001_033E: \"20-24\", // 21\n  B01001_034E: \"20-24\", // 22-24\n  B01001_035E: \"25-29\",\n  B01001_036E: \"30-34\",\n  B01001_037E: \"35-39\",\n  B01001_038E: \"40-44\",\n  B01001_039E: \"45-49\",\n  B01001_040E: \"50-54\",\n  B01001_041E: \"55-59\",\n  B01001_042E: \"60-64\", // 60-61\n  B01001_043E: \"60-64\", // 62-64\n  B01001_044E: \"65-69\", // 65-66\n  B01001_045E: \"65-69\", // 67-69\n  B01001_046E: \"70-74\",\n  B01001_047E: \"75-79\",\n  B01001_048E: \"80-84\",\n  B01001_049E: \"≥85\"\n})\n\nexport { ageBands, sumArray, variables, states, ageVariables, getByValue }","import {useState, useEffect} from 'react';\nimport { sum } from 'd3';\nimport { ageVariables, states, getByValue, sumArray } from '../lib/utils'\n\n\nconst ChartTitle = (props) => {\n\n\tconst index = new Map(props.data.map((d, i) => [d, i]));\n  let sums = [...props.data].map(d => Array.from(ageVariables, V => sum(V, v => d[index.get(v)])))\n  // console.log('sums: ', sums)\n  // const sumArray = (array) => {\n  //  const newArray = [];\n  //  array.forEach(sub => {\n  //     sub.forEach((num, index) => {\n  //        if(newArray[index]){\n  //           newArray[index] += num;\n  //        }else{\n  //           newArray[index] = num;\n  //        }\n  //     });\n  //  });\n  //  return newArray;\n  // }\n\n  // const populations = sumArray(sums)\n  // let totalPopulation = populations.reduce(function(accumulator, currentValue, currentIndex, array) {\n  //   return accumulator + currentValue\n  // })\n\n  // console.log('totalPopulation: ', totalPopulation)\n\n\treturn (\n\t\t<h2 className=\"title\">US Population by Age, by State. </h2>\n\t\t)\n}\n\nexport default ChartTitle","import { useEffect, useState } from \"react\";\nimport ResizeObserver from \"resize-observer-polyfill\";\n\n/**\n * Hook, that returns the current dimensions of an HTML element.\n * Doesn't play well with SVG.\n */\n\nconst useResizeObserver = ref => {\n  const [dimensions, setDimensions] = useState(null);\n  useEffect(() => {\n    const observeTarget = ref.current;\n    const resizeObserver = new ResizeObserver(entries => {\n      entries.forEach(entry => {\n        setDimensions(entry.contentRect);\n      });\n    });\n    resizeObserver.observe(observeTarget);\n    return () => {\n      resizeObserver.unobserve(observeTarget);\n    };\n  }, [ref]);\n  return dimensions;\n};\n\nexport default useResizeObserver;\n","import React, { useRef, useEffect } from 'react';\nimport * as d3 from 'd3';\nimport useResizeObserver from '../hooks/useResizeObserver';\n\nfunction PopulationBarChart({ data, property }) {\n  const svgRef = useRef();\n  const wrapperRef = useRef();\n  // get current dimensions of the element we give it\n  const dimensions = useResizeObserver(wrapperRef);\n\n  useEffect(() => {\n    console.log('Render, dimensions: ', dimensions)\n    const svg = d3.select(svgRef.current);\n    // use resized dimensions\n    const { width, height } = dimensions || wrapperRef.current.getBoundingClientRect();\n    const margin = { top: 5, right: 5, bottom: 5, left: 5 };\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n\n    const yScale = d3.scaleBand()\n      .domain(data.map(d => d.name))\n      .range([innerHeight - margin.bottom, margin.top])\n      .padding(0.1)\n\n    const xScale = d3.scaleLinear()\n      .domain([0, d3.max(data, d => d.value)])\n      .range([margin.left, innerWidth - margin.right])\n\n    svg.append(\"g\")\n        .attr(\"class\", \"x-axis\");\n\n    svg.append(\"g\")\n        .attr(\"class\", \"y-axis\");\n\n    svg.select(\".x-axis\")\n      .attr(\"transform\", `translate(0,${innerHeight - margin.bottom})`)\n      .call(g => g.transition().call(d3.axisBottom(xScale).ticks(width / 80, \"s\")))\n      .call(g => g.select(\".domain\").remove());\n\n    svg.select(\".y-axis\")\n      .attr(\"transform\", `translate(${margin.left},0)`)\n      .call(g => g.transition().call(d3.axisLeft(yScale).tickSizeOuter(0)));\n\n    svg.append(\"g\")\n        .attr(\"fill\", \"steelblue\")\n      .selectAll(\"rect\")\n      .data(data)\n      .enter().append(\"rect\")\n        .attr(\"class\", \"bar\")\n        .attr(\"width\", 0);\n\n    svg.append(\"g\")\n        .attr(\"fill\", \"white\")\n        .attr(\"text-anchor\", \"end\")\n        .style(\"font\", \"12px sans-serif\")\n      .selectAll(\"text\")\n      .data(data)\n      .enter().append(\"text\")\n        .attr(\"class\", \"label\")\n        .attr(\"dy\", \"0.35em\")\n        .attr(\"x\", xScale(0) - 4);\n\n    svg.selectAll(\".bar\")\n      .data(data, d => d.name)\n        .attr(\"x\", xScale(0))\n        .attr(\"y\", d => yScale(d.name))\n        .attr(\"height\", yScale.bandwidth())\n      .transition()\n        .delay((d, i) => i * 20)\n        .attr(\"width\", d => xScale(d.value) - xScale(0));\n\n    svg.selectAll(\".label\")\n      .data(data, d => d.name)\n        .attr(\"y\", d => yScale(d.name) + yScale.bandwidth() / 2)\n        .text(d => d.value.toLocaleString())\n      .transition()\n        .delay((d, i) => i * 20)\n        .attr(\"x\", d => xScale(d.value) - 4);\n        \n  }, [data, dimensions, property])\n\n  const svgStyles = {\n    \"height\": \"500px\",\n    \"marginTop\": \"5px\"\n  }\n\n  return(\n    <div ref={wrapperRef} style={{ marginBottom: '2rem '}}>\n      <svg ref={svgRef} style={svgStyles}></svg>\n    </div>\n    )\n\n}\n\nexport default PopulationBarChart;","import {useState, useEffect} from 'react'\nimport * as d3 from 'd3'\n\nimport ChartTitle from './components/ChartTitle'\nimport PopulationBarChart from './components/PopulationBarChart'\nimport { ageVariables, states, getByValue} from './lib/utils'\n\nimport './style.css';\n\nfunction App() {\n\n\tconst [selectedState, setSelectedState] = useState('All states')\n\tconst [censusData, setCensusData] = useState('')\n\tconst [geography, setGeography] = useState('us')\n\n\tconst handleChange = (event) => {\n\t\tsetSelectedState(event.target.value)\n\t\tlet mapValue = getByValue(states, event.target.value)\n\t\tmapValue !== '*' ? setGeography('state') : setGeography('us')\n\t}\n\n\tuseEffect(() => {\n\t\td3.json(`https://api.census.gov/data/2019/acs/acs5?get=${d3.keys(ageVariables).join()}&for=${geography}:${getByValue(states, selectedState)}`)\n\t\t\t.then(data => {\n\t\t\t\tlet censusData = d3.nest()\n\t\t\t    .key(([code]) => ageVariables[code])\n\t\t\t    .rollup(values => d3.sum(values, ([code, value]) => +value))\n\t\t\t  .entries(d3.transpose(data).slice(0, -1))\n\t\t\t  .map(({key, value}) => ({name: key, value}))\n\t\t\t  console.log('selectedState: ', selectedState)\n\t\t\t  setCensusData(censusData)\n\t\t\t})\n\t},[selectedState, geography])\n\n\t// Array.from( states ).map(([key, value]) => ({ key, value })); \n\n\tlet statesArr = [...states].map(value => value[1]);\n\n  if (!censusData) {\n    return (\n      <div>\n        <h1>Loading...</h1>\n      </div>\n      )\n  }\n\n  return (\n    <div>\n     <ChartTitle data={censusData}/>\n     <div className=\"stateSelector\">\n\t\t\t\t<select \n\t\t\t\t\tvalue={selectedState}\n\t\t\t\t\t// onChange={event => setSelectedState(event.target.value)}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t>\t\t\t\n\t\t\t\t\t{statesArr.map((option, index) => (\n\t\t      \t<option key={index} value={option}>{option} </option>\n\t\t      ))}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<PopulationBarChart data={censusData}/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}